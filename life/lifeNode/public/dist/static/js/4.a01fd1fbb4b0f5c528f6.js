webpackJsonp([4],{M2Gm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("yfOR"),s=a.n(n),i={data:function(){return{retComponent:"",detailComponent:"",payMoney:29.9,afterPay:!1,beforePay:!0}},methods:{close:function(e){this.$router.push({name:this.retComponent})},genePreOrder:function(){var e=s.a.domain+"/preOrder",t={wxOpenId:window.localStorage.getItem("wxOpenId"),appointId:this.$route.params.appointId,fee:this.payMoney};this.$post(e,t).then(function(e){if("success"==e.status){var t=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appId,timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign},function(e){var t=this;if("get_brand_wcpay_request:ok"==e.err_msg){var n={tradeNo:a.tradeNo,chargeStatus:"1"},i=s.a.domain+"/updateChargeStatus";this.$post(i,n).then(function(e){t.afterPay=!0,t.beforePay=!1})}else this.$router.push({name:retName,params:{msg:"payFailed"}})})},a=e.data;"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",t,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",t),document.attachEvent("onWeixinJSBridgeReady",t)):t()}else console.log("支付失败")})},getRetName:function(){var e=this.$route.params.retComponent;0==e&&(this.retComponent="wyArtMuseumAppointmentCenter"),1==e&&(this.retComponent="wyCellStorageAppointmentCenter")},viewDetail:function(){this.$router.push({name:this.detailComponent,params:{id:this.$route.params.appointId}})}},created:function(){this.getRetName()}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.beforePay,expression:"beforePay"}],attrs:{id:"msg"}},[n("span",[e._v("已添加预约,请支付!")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.beforePay,expression:"beforePay"}]},[n("div",{staticClass:"pay-content"},[n("span",{staticClass:"pay-logo-font"},[e._v("体验券活动价")]),e._v(" "),n("span",{staticClass:"money-amount"},[e._v(e._s(e.payMoney))]),e._v(" "),n("span",{staticClass:"money"},[e._v("元")])]),e._v(" "),e._m(0),e._v(" "),n("div",[n("a",{staticClass:"common-btn",attrs:{href:"javascript:void(0);"},on:{click:e.genePreOrder}},[e._v("支付")]),e._v(" "),n("a",{staticClass:"common-btn",attrs:{href:"javascript:void(0);"},on:{click:e.close}},[e._v("取消")])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.afterPay,expression:"afterPay"}],staticClass:"pay_success"},[n("img",{staticClass:"pay_suc_img",attrs:{src:a("lc/T")}}),e._v(" "),n("span",{staticClass:"pay_suc_span"},[e._v("缴费完成，预约成功！")]),e._v(" "),n("a",{staticClass:"yuyue_detail",attrs:{href:"javascript:void(0);"},on:{click:e.viewDetail}},[e._v("查看预约详情")])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pay-method"},[t("span",[this._v("支付方式")]),t("br"),this._v(" "),t("img",{staticClass:"wx-logo",attrs:{src:a("mMLd")}})])}]};var r=a("VU/8")(i,o,!1,function(e){a("hwW/")},null,null);t.default=r.exports},"hwW/":function(e,t){},"lc/T":function(e,t,a){e.exports=a.p+"static/img/ok.dfa83ae.png"},mMLd:function(e,t,a){e.exports=a.p+"static/img/payment.29cb2cd.png"}});
//# sourceMappingURL=4.a01fd1fbb4b0f5c528f6.js.map