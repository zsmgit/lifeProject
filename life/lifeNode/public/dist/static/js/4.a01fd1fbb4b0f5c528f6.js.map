{"version":3,"sources":["webpack:///src/components/payment.vue","webpack:///./src/components/payment.vue?5d08","webpack:///./src/components/payment.vue","webpack:///./src/assets/img/ok.png","webpack:///./src/assets/payment.png"],"names":["payment","data","retComponent","detailComponent","payMoney","afterPay","beforePay","methods","close","envent","this","$router","push","name","genePreOrder","url","domain_default","a","domain","wxOpenId","window","localStorage","getItem","appointId","$route","params","fee","$post","then","status","onBridgeReady","WeixinJSBridge","invoke","appId","ret","timeStamp","nonceStr","package","signType","paySign","res","_this","err_msg","sendData","tradeNo","chargeStatus","retName","msg","document","addEventListener","attachEvent","console","log","getRetName","viewDetail","id","created","components_payment","render","_vm","_h","$createElement","_c","_self","ref","directives","rawName","value","expression","attrs","_v","staticClass","_s","_m","href","on","click","src","__webpack_require__","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports","p"],"mappings":"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","file":"static/js/4.a01fd1fbb4b0f5c528f6.js","sourcesContent":["<template lang=\"html\">\r\n\t<div ref='container'>\r\n\t\t\r\n\t\t<div id='msg' v-show=\"beforePay\"><span>已添加预约,请支付!</span></div>\r\n\t\t\r\n\t\t<div v-show=\"beforePay\">\r\n\t\t\t<div class=\"pay-content\">\r\n\t\t\t\t<span class=\"pay-logo-font\">体验券活动价</span>\r\n\t\t\t\t<span class=\"money-amount\">{{payMoney}}</span>\r\n\t\t\t\t<span class=\"money\">元</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"pay-method\">\r\n\t\t\t\t<span>支付方式</span><br />\r\n\t\t\t\t<img src=\"../assets/payment.png\" class=\"wx-logo\" />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"javascript:void(0);\" class=\"common-btn\" v-on:click=\"genePreOrder\">支付</a>\r\n\t\t\t\t<a href=\"javascript:void(0);\" class=\"common-btn\" v-on:click=\"close\">取消</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div v-show=\"afterPay\" class=\"pay_success\">\r\n\t\t\t<img src=\"../assets/img/ok.png\" class=\"pay_suc_img\"/>\r\n\t\t\t<span class=\"pay_suc_span\">缴费完成，预约成功！</span>\r\n\t\t\t<a href=\"javascript:void(0);\" class=\"yuyue_detail\" v-on:click=\"viewDetail\">查看预约详情</a>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport domainUtils from '../utils/domain'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tretComponent: '',\r\n\t\t\t\tdetailComponent: '',\r\n\t\t\t\tpayMoney: 29.9,\r\n\t\t\t\tafterPay: false,\r\n\t\t\t\tbeforePay: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tclose: function(envent) {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: this.retComponent\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//=================\r\n\t\t\t//todo\r\n\t\t\tgenePreOrder: function() {\r\n\r\n\t\t\t\tvar url = domainUtils.domain + '/preOrder';\r\n\t\t\t\tlet wxOpenId = window.localStorage.getItem('wxOpenId');\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\twxOpenId: wxOpenId,\r\n\t\t\t\t\tappointId: this.$route.params.appointId,\r\n\t\t\t\t\tfee: this.payMoney\r\n\t\t\t\t}\r\n\t\t\t\tthis.$post(url, data).then((data) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(data.status == \"success\") {\r\n\t\t\t\t\t\tvar ret = data.data;\r\n\t\t\t\t\t\t//页面内调起微信支付\r\n\t\t\t\t\t\tfunction onBridgeReady() {\r\n\t\t\t\t\t\t\tWeixinJSBridge.invoke(\r\n\t\t\t\t\t\t\t\t'getBrandWCPayRequest', {\r\n\t\t\t\t\t\t\t\t\t\"appId\": ret.appId, //公众号名称，由商户传入     \r\n\t\t\t\t\t\t\t\t\t\"timeStamp\": ret.timeStamp, //时间戳，自1970年以来的秒数     \r\n\t\t\t\t\t\t\t\t\t\"nonceStr\": ret.nonceStr, //随机串     \r\n\t\t\t\t\t\t\t\t\t\"package\": ret.package,\r\n\t\t\t\t\t\t\t\t\t\"signType\": ret.signType, //微信签名方式：     \r\n\t\t\t\t\t\t\t\t\t\"paySign\": ret.paySign //微信签名 \r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif(res.err_msg == \"get_brand_wcpay_request:ok\") {\r\n\t\t\t\t\t\t\t\t\t\tvar sendData = {\r\n\t\t\t\t\t\t\t\t\t\t\t'tradeNo': ret.tradeNo,\r\n\t\t\t\t\t\t\t\t\t\t\t'chargeStatus': \"1\" //支付成功\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t//更新预约支付状态\r\n\t\t\t\t\t\t\t\t\t\tvar url = domainUtils.domain + \"/updateChargeStatus\";\r\n\t\t\t\t\t\t\t\t\t\tthis.$post(url, sendData).then((data) => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.afterPay = true;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.beforePay = false;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\t\t\t\tname: retName,\r\n\t\t\t\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmsg: \"payFailed\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif(typeof WeixinJSBridge == \"undefined\") {\r\n\t\t\t\t\t\t\tif(document.addEventListener) {\r\n\t\t\t\t\t\t\t\tdocument.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\r\n\t\t\t\t\t\t\t} else if(document.attachEvent) {\r\n\t\t\t\t\t\t\t\tdocument.attachEvent('WeixinJSBridgeReady', onBridgeReady);\r\n\t\t\t\t\t\t\t\tdocument.attachEvent('onWeixinJSBridgeReady', onBridgeReady);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tonBridgeReady();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"支付失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, //=========\r\n\t\t\tgetRetName() {\r\n\t\t\t\tvar retName = this.$route.params.retComponent;\r\n\t\t\t\tif(retName == 0) {\r\n\t\t\t\t\tthis.retComponent = \"wyArtMuseumAppointmentCenter\";\r\n\r\n\t\t\t\t} \r\n\t\t\t\tif(retName == 1) {\r\n\t\t\t\t\tthis.retComponent = \"wyCellStorageAppointmentCenter\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tviewDetail: function() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: this.detailComponent,\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tid: this.$route.params.appointId\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getRetName()\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"../assets/scss/reset.css\";\r\n\t@import \"../assets/scss/payment.scss\";\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/payment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.beforePay),expression:\"beforePay\"}],attrs:{\"id\":\"msg\"}},[_c('span',[_vm._v(\"已添加预约,请支付!\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.beforePay),expression:\"beforePay\"}]},[_c('div',{staticClass:\"pay-content\"},[_c('span',{staticClass:\"pay-logo-font\"},[_vm._v(\"体验券活动价\")]),_vm._v(\" \"),_c('span',{staticClass:\"money-amount\"},[_vm._v(_vm._s(_vm.payMoney))]),_vm._v(\" \"),_c('span',{staticClass:\"money\"},[_vm._v(\"元\")])]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('div',[_c('a',{staticClass:\"common-btn\",attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":_vm.genePreOrder}},[_vm._v(\"支付\")]),_vm._v(\" \"),_c('a',{staticClass:\"common-btn\",attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":_vm.close}},[_vm._v(\"取消\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.afterPay),expression:\"afterPay\"}],staticClass:\"pay_success\"},[_c('img',{staticClass:\"pay_suc_img\",attrs:{\"src\":require(\"../assets/img/ok.png\")}}),_vm._v(\" \"),_c('span',{staticClass:\"pay_suc_span\"},[_vm._v(\"缴费完成，预约成功！\")]),_vm._v(\" \"),_c('a',{staticClass:\"yuyue_detail\",attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":_vm.viewDetail}},[_vm._v(\"查看预约详情\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pay-method\"},[_c('span',[_vm._v(\"支付方式\")]),_c('br'),_vm._v(\" \"),_c('img',{staticClass:\"wx-logo\",attrs:{\"src\":require(\"../assets/payment.png\")}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5e9da8e7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/payment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5e9da8e7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./payment.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./payment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./payment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5e9da8e7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./payment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/payment.vue\n// module id = null\n// module chunks = ","module.exports = __webpack_public_path__ + \"static/img/ok.dfa83ae.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/img/ok.png\n// module id = lc/T\n// module chunks = 4","module.exports = __webpack_public_path__ + \"static/img/payment.29cb2cd.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/payment.png\n// module id = mMLd\n// module chunks = 4"],"sourceRoot":""}